<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Rust Day 2: Linked Lists | Gustavo&#39;s blog</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Today I was inspired to continue learning Rust by implementing what every CS student eventually has to know backwards and forwards to get a job: a singly linked list. This shouldn&rsquo;t be too hard, my list will support:
Appending elements to the list one at a time Iterating over elements Determining the length of the list by iterating from head to tail Deallocating the list Using Rust modules (just to learn how they work) Every linked list needs a good recursive linked_list_node definition with a nice car and cdr erm I mean value and next:">
    <meta name="generator" content="Hugo 0.102.3" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    
    
    
      

    

    
    
    <meta property="og:title" content="Rust Day 2: Linked Lists" />
<meta property="og:description" content="Today I was inspired to continue learning Rust by implementing what every CS student eventually has to know backwards and forwards to get a job: a singly linked list. This shouldn&rsquo;t be too hard, my list will support:
Appending elements to the list one at a time Iterating over elements Determining the length of the list by iterating from head to tail Deallocating the list Using Rust modules (just to learn how they work) Every linked list needs a good recursive linked_list_node definition with a nice car and cdr erm I mean value and next:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://gustavohidalgo.com/posts/2021-08-11-rust-linked-list/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-11T12:34:23-04:00" />
<meta property="article:modified_time" content="2021-08-11T12:34:23-04:00" />

<meta itemprop="name" content="Rust Day 2: Linked Lists">
<meta itemprop="description" content="Today I was inspired to continue learning Rust by implementing what every CS student eventually has to know backwards and forwards to get a job: a singly linked list. This shouldn&rsquo;t be too hard, my list will support:
Appending elements to the list one at a time Iterating over elements Determining the length of the list by iterating from head to tail Deallocating the list Using Rust modules (just to learn how they work) Every linked list needs a good recursive linked_list_node definition with a nice car and cdr erm I mean value and next:"><meta itemprop="datePublished" content="2021-08-11T12:34:23-04:00" />
<meta itemprop="dateModified" content="2021-08-11T12:34:23-04:00" />
<meta itemprop="wordCount" content="356">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Rust Day 2: Linked Lists"/>
<meta name="twitter:description" content="Today I was inspired to continue learning Rust by implementing what every CS student eventually has to know backwards and forwards to get a job: a singly linked list. This shouldn&rsquo;t be too hard, my list will support:
Appending elements to the list one at a time Iterating over elements Determining the length of the list by iterating from head to tail Deallocating the list Using Rust modules (just to learn how they work) Every linked list needs a good recursive linked_list_node definition with a nice car and cdr erm I mean value and next:"/>

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Gustavo&#39;s blog
      
    </a>
    <div class="flex-l items-center">
      

      
      
<div class="ananke-socials">
  
</div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        POSTS
      </aside>
      










  <div id="sharing" class="mt3 ananke-socials">
    
  </div>


      <h1 class="f1 athelas mt3 mb1">Rust Day 2: Linked Lists</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2021-08-11T12:34:23-04:00">August 11, 2021</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>Today I was inspired to continue learning Rust by implementing what every CS student eventually has to know backwards and forwards to get a job: a singly linked list.
This shouldn&rsquo;t be too hard, my list will support:</p>
<ol>
<li>Appending elements to the list one at a time</li>
<li>Iterating over elements</li>
<li>Determining the length of the list by iterating from head to tail</li>
<li>Deallocating the list</li>
<li>Using Rust modules (just to learn how they work)</li>
</ol>
<p>Every linked list needs a good recursive <code>linked_list_node</code> definition with a nice <code>car</code> and <code>cdr</code> erm I mean <code>value</code> and <code>next</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">LinkedListNode</span><span style="color:#f92672">&lt;&#39;</span><span style="color:#a6e22e">a</span>, T<span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>    value : <span style="color:#a6e22e">T</span>,
</span></span><span style="display:flex;"><span>    next : <span style="color:#66d9ef">&amp;</span><span style="color:#f92672">&#39;</span><span style="color:#a6e22e">a</span> <span style="color:#a6e22e">LinkedListNode</span><span style="color:#f92672">&lt;&#39;</span><span style="color:#a6e22e">a</span>, T<span style="color:#f92672">&gt;</span>,
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>It&rsquo;s obvious to me why <code>next</code> has to be a reference to a <code>LinkedListNode</code>, but the lifetime parameter <code>'a</code> requires some explaining. That will be explained later.
Now obviously we need to support creating an empty list and adding elements to it one at a time.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">List</span><span style="color:#f92672">&lt;&#39;</span><span style="color:#a6e22e">a</span>, T<span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>    head : <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">LinkedListNode</span><span style="color:#f92672">&lt;&#39;</span><span style="color:#a6e22e">a</span>, T<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">impl</span> List {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">new</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// except Rust doesn&#39;t have a null!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        List { head : <span style="color:#a6e22e">null</span> }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Now here is where I ran into my first C#-induced headache, because I would have loved to use <code>null</code> to represent a the end of a list.
Rust has no nulls, and some Googling immediately pointed me toward using an <code>Option</code> and a <a href="https://rust-unofficial.github.io/too-many-lists/first-layout.html">great book</a> doing exactly what I&rsquo;m trying to do!
In short, we can use Rust <code>enum</code>s to create a <a href="https://en.wikipedia.org/wiki/Tagged_union">tagged union</a>(or what F# would call a discriminated union) to define a type that can be one of several values (one of which is Null or Nil) and whose values can themselves be more complex types.
Something like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">ListNode</span> {
</span></span><span style="display:flex;"><span>    Empty,
</span></span><span style="display:flex;"><span>    ListNode(<span style="color:#66d9ef">i32</span>, Box<span style="color:#f92672">&lt;</span>ListNode<span style="color:#f92672">&gt;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>I read that like this: A <code>ListNode</code> is either the <code>ListNode::Empty</code> value, or it is a <code>ListNode(i32, Box&lt;ListNode&gt;)</code> which is an <code>i32</code> paired with a pointer to a heap-allocated <code>ListNode</code>.</p>
<h1 id="conclusion">Conclusion</h1>
<p>I wouldn&rsquo;t say that starting to write this post was a waste of time because I discovered a great book to read through.
Sometimes starting and failing still results in a victory.</p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://gustavohidalgo.com/" >
    &copy;  Gustavo's blog 2022 
  </a>
    <div>
<div class="ananke-socials">
  
</div>
</div>
  </div>
</footer>

  </body>
</html>
